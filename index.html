<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Test push</title>
</head>
<body> 
 	
 	<button onclick="subscribe()">Subscribe</button>

	<script>

		addEventListener('load', async () => {
			let sw = await navigator.serviceWorker.register('./swnew.js');
			console.log(sw);
		})

		async function subscribe() {
			let sw = await navigator.serviceWorker.ready;
			let push = await sw.pushManager.subscribe({
				userVisibleOnly: true,
				applicationServerKey: 'BASl-L1-4IZnSvKdRuq7TKXHvl4hIBEznW0Pp9n3xF_dlYhMGBJjINYzYBwLeyPBWURCzQILjsyK-5vvXb48Mbs'
			})
			console.log(JSON.stringify(push));
			console.log('test2');
		}

	</script> 



</body>
</html>